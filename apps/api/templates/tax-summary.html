<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Tax Summary — {{data.year}}</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { font-family: 'IBM Plex Sans', Arial, sans-serif; font-size: 12px; color: #161616; background: white; padding: 40px; }
  h1 { font-size: 24px; font-weight: 700; color: #0f62fe; margin-bottom: 4px; }
  h2 { font-size: 16px; font-weight: 600; color: #161616; margin: 24px 0 12px; border-bottom: 2px solid #0f62fe; padding-bottom: 6px; }
  h3 { font-size: 13px; font-weight: 600; color: #161616; margin: 16px 0 8px; }
  .header { border-bottom: 3px solid #0f62fe; padding-bottom: 16px; margin-bottom: 32px; display: flex; justify-content: space-between; }
  .business-info p { font-size: 11px; color: #525252; line-height: 1.6; }
  .report-meta { text-align: right; }
  .report-meta .year { font-size: 32px; font-weight: 300; color: #0f62fe; }
  .report-meta p { font-size: 11px; color: #525252; }

  table { width: 100%; border-collapse: collapse; margin-bottom: 16px; }
  thead { background: #0f62fe; color: white; }
  thead th { padding: 8px 12px; text-align: left; font-size: 11px; font-weight: 600; text-transform: uppercase; }
  thead th:last-child { text-align: right; }
  tbody tr { border-bottom: 1px solid #e0e0e0; }
  tbody tr:nth-child(even) { background: #f4f4f4; }
  tbody td { padding: 8px 12px; font-size: 11px; }
  tbody td:last-child { text-align: right; }
  .total-row { background: #e8f0fe !important; font-weight: 700; }
  .grand-total { background: #0f62fe !important; color: white !important; font-size: 14px; font-weight: 700; }
  .grand-total td { padding: 12px; }

  .summary-card { background: #f4f4f4; border-left: 4px solid #0f62fe; padding: 16px; margin-bottom: 16px; border-radius: 0 4px 4px 0; }
  .summary-card .value { font-size: 20px; font-weight: 700; color: #0f62fe; }
  .summary-card .label { font-size: 11px; color: #525252; }

  .bracket-table td { padding: 6px 12px; }
  .disclaimer { border-top: 1px solid #e0e0e0; margin-top: 32px; padding-top: 16px; font-size: 10px; color: #8d8d8d; line-height: 1.6; }
</style>
</head>
<body>

<div class="header">
  <div class="business-info">
    <h1>{{business.business_name}}</h1>
    <p>{{business.address_line1}}<br>{{business.city}}, {{business.postcode}}<br>TIN: {{business.tin}}</p>
  </div>
  <div class="report-meta">
    <div class="year">AY{{data.year}}</div>
    <p>Borang B Tax Summary</p>
    <p>Generated: {{data.generatedAt}}</p>
  </div>
</div>

<h2>Part B — Business Income</h2>
<table>
  <thead><tr><th>Description</th><th>Amount (MYR)</th></tr></thead>
  <tbody>
    <tr><td>Gross Revenue (Paid Invoices)</td><td>{{data.partB.grossIncome}}</td></tr>
    <tr><td>Number of Invoices</td><td>{{data.partB.invoiceCount}}</td></tr>
    <tr class="total-row"><td>Net Business Income</td><td>{{data.partB.grossIncome}}</td></tr>
  </tbody>
</table>

<h2>Part D — Allowable Business Expenses</h2>
<table>
  <thead><tr><th>Section</th><th>Description</th><th>Amount (MYR)</th></tr></thead>
  <tbody id="expense-sections">
    <!-- Rendered per section -->
  </tbody>
  <tr class="grand-total"><td colspan="2">Total Allowable Expenses</td><td>{{data.partD.totalExpenses}}</td></tr>
</table>

<h2>Summary</h2>
<table>
  <tbody>
    <tr><td>Gross Business Income</td><td>{{data.partB.grossIncome}}</td></tr>
    <tr><td>Less: Allowable Expenses</td><td>({{data.partD.totalExpenses}})</td></tr>
    <tr class="total-row"><td>Adjusted Business Income (Gross Profit)</td><td>{{data.grossProfit}}</td></tr>
  </tbody>
</table>

<h2>Mileage Deduction</h2>
<table>
  <tbody>
    <tr><td>Total Business Kilometres</td><td>{{data.mileage.totalKm}} km</td></tr>
    <tr><td>Rate per km</td><td>RM 0.25</td></tr>
    <tr class="total-row"><td>Total Mileage Deduction</td><td>{{data.mileage.deductibleAmount}}</td></tr>
  </tbody>
</table>

<div class="disclaimer">
  <strong>Disclaimer:</strong> This document is generated for reference purposes only.
  The figures shown are based on data entered in the Personal Accountant system.
  This is not a substitute for professional tax advice. Please consult a licensed tax agent
  before filing your Borang B with LHDN. All amounts in Malaysian Ringgit (MYR) unless stated.
</div>

</body>
</html>
